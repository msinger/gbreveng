<html>
<head>
<title>Wide-Boy64 Research</title>
</head>
<body>
<p><a href="http://iceboy.a-singer.de/">Home</a></p>
<h1>Wide-Boy64 Research</h1>
<p><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#wideboy64cgb">Wide-Boy64 CGB</a><ul>
<li><a href="#cgbadapter">CGB Adapter</a></li>
</ul></li>
<li><a href="#wideboy64agb">Wide-Boy64 AGB</a><ul>
<li><a href="#agbcomponents">Components</a></li>
<li><a href="#agbbitstream">Spartan Bitstream</a></li>
<li><a href="#agb40pin">40-pin connector pinout on Wide-Boy64 AGB</a></li>
<li><a href="#agbmem">Memories connected to FPGA (and each other) on Wide-Boy64 AGB</a><ul>
<li><a href="#agbflash">Flash</a></li>
<li><a href="#agbdram">DRAM</a></li>
</ul></li>
<li><a href="#agbvolt">Voltages measured on regulators on Wide-Boy64 AGB</a></li>
</ul></li>
<li><a href="#cloning">Ideas for building a Wide-Boy64 clone</a></li>
<li><a href="#links">Links</a></li>
</ul></p>
<h2 id="overview">Overview</h2>
<p>I got my hands on a Wide-Boy64 AGB that I found on Ebay. It's in a very good condition.</p>
<p><img src="img/wideboy64agb.png"><br>
<i><u>Picture 1</u><br>
Wide-Boy64 AGB</i></p>
<p>It came with this small cable. I don't know what this is used for.</p>
<p><img src="img/wideboy64cable.png"><br>
<i><u>Picture 2</u><br>
Cable that came with the Wide-Boy64</i></p>
The smaller black connector of this cable fits into the white connector on the front side of the Wide-Boy.
The bigger white connector fits into the connector on a Wide-Boy64 CGB cartridge port adapter that is used to
connect a specially prepped Game Boy Color to a Wide-Boy64 CGB. I bought such an adapter from the same seller
on Ebay from which I got the Wide-Boy64 AGB. Though this adapter obviously can't be used with the AGB version
of the Wide-Boy. I bought it out of curiosity. The Wide-Boy64 AGB that I have doesn't even have the 40 pin
connector that you need for that. The connector is not soldered onto the PCB and there is no hole cut for it
into the front of the shell. I could solder it in myself, but then I would also need to cut a hole for it. I
don't want to modify the original shell. It would look very ugly when <i>I</i> do it.<p>
<p>You can't connect any regular Game Boy to a Wide-Boy. The ones you use as an controller for the Wide-Boy
don't have a Game Boy CPU. They have a different PCB that just connects the cartridge port to the display and
buttons (and maybe the audio amplifier, not sure about that). So they just act as an I/O device.<p>
<h2 id="wideboy64cgb">Wide-Boy64 CGB</h2>
<p>Since I don't have the CGB variant of the Wide-Boy64 (yet), I can only describe it's adapter here.</p>
<h3 id="cgbadapter">CGB Adapter</h3>
<p>This is the CGB Adapter I bought:</p>
<p><img src="img/wideboy64cgb_adapter_front.png"><img src="img/wideboy64cgb_adapter_back.png"><br>
<i><u>Picture 3&4</u><br>
Wide-Boy64 CGB Adapter</i></p>
<p><img src="img/wideboy64cgb_adapter_pcbfront.png"><img src="img/wideboy64cgb_adapter_pcbback.png"><br>
<i><u>Picture 5&6</u><br>
Wide-Boy64 CGB Adapter PCB</i></p>
<p>I have drawn a schematic for the PCB: <a href="dmg_cart_probe.pdf">dmg_cart_probe.pdf</a></p>
<p>I labelled the pins on the cartridge connector with the signals that they ususally have on a cartridge
(address, data, ...), not the display and button signals that the Wide-Boy puts onto them. The fact that they
didn't connect pin 31 (the analog pin) makes me think that this PCB wasn't designed specifically for the
Wide-Boy in mind. They might have used this for probing the signals between a Game Boy and a cartridge.
(Notice the silk print on the PCB: "DMG CARTRIDGE PROBE") It wouldn't make any sense to not use pin 31
otherwise.</p>
<h2 id="wideboy64agb">Wide-Boy64 AGB</h2>
<h3 id="agbcomponents">Components</h3>
<p>Here is what I found out about the main components inside the Wide-Boy64 AGB. (Higher resolution pictures can
be found in my <a href="../db/wb64agb_iceboy_1.html">Game Boy database</a>.)</p>
<p><img src="img/wideboy64agb_components.png"><br>
<i><u>Picture 7</u><br>
Components of the Wide-Boy64 AGB</i></p>
<p>The EEPROM in the bottom left (BU9850) is used in many N64 cartridges that allow to save the game. I don't
know what it is used for in the Wide-Boy. My guess is, they designed it in just in case they need it, but then
never used it for anything. The Wide-Boy64 AGB does not save any settings. It doesn't even have a menu or
something. I haven't checked the contents of this EEPROM yet. I expect it to be all 0xFF. Ah, and yes, it is
connected to the N64 connector at the bottom, so it can be accessed by the N64.</p>
<p>There is a second place at the top center of the PCB where a Game Boy External Link Port could be soldered
in. Seems like when the PCB was designed, they haven't decided yet where to put the connector.</p>
<p>Luckily, the CIC, EEPROM and PROM chips are socketed. This makes it easy to change the region and dump the
EEPROM and PROM contents. The Flash is not socketed though. I don't know yet if all it's contents can be
accessed by the N64 or if the FPGA reads some other data than the N64 software from it as well.</p>
<p>The clock generator (U15) to the left of the FPGA provides a ~48.6 MHz clock to the FPGA pin 72. I drew a
schematic for that part of the PCB: <a href="wb64agb_clkgen.pdf">wb64agb_clkgen.pdf</a><br>
Note that the 250 MHz clock output (RCLK) just gets drained through resistor R24.</p>
<h3 id="agbbitstream">Spartan bitstream</h3>
<p>I was able to dump the FPGA bitstream from the PROM with an iCE40HX-8K Breakout Board.</p>
<p><img src="img/wideboy64agb_prom_dump.png"><br>
<i><u>Picture 8</u><br>
Wide-Boy64 AGB PROM connected to iCE40HX-8K Breakout Board</i></p>
<p>The code I used for dumping it on a 1MBit UART can be found <a href="https://sourceforge.net/p/iceboy/reveng/ci/master/tree/wb64agb_prom_dump/dump.sv">here</a>.</p>
<p>The PROM contains 179160 bits (22395 bytes) and when stored LSB-first it has the following hashes:</p>
<p><ul>
<li>MD5: 536e776798fa2ab103e49cd322fb5669</li>
<li>SHA256: b41f2e84b0d14a2065dfcc17bfb7d49056a277c9c2f0ace1124c7e48b831b49f</li>
</ul></p>
<h3 id="agb40pin">40-pin connector pinout on Wide-Boy64 AGB</h3>
<p><table border="1">
<tr>
<th><p><i>Pin#</i></p></th>
<th><p>Usage</p></th>
<th colspan="2"><p>To CPU</p></th>
<th colspan="2"><p>To FPGA</p></th>
<th><p><i>Pin#</i></p></th>
<th><p>Usage</p></th>
<th colspan="2"><p>To CPU</p></th>
<th colspan="2"><p>To FPGA</p></th>
</tr><tr>
<th><p>1</p></th>
<td><p>Audio R</p></td>
<td><p>6</p></td>
<td><p>SO1</p></td>
<td colspan="2"><p>-</p></td>
<th><p>21</p></th>
<td><p>LCD Data B2</p></td>
<td><p>100</p></td>
<td><p>LDB2</p></td>
<td><p>86</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>2</p></th>
<td><p>Audio L</p></td>
<td><p>7</p></td>
<td><p>SO2</p></td>
<td colspan="2"><p>-</p></td>
<th><p>22</p></th>
<td><p>LCD Data B3</p></td>
<td><p>99</p></td>
<td><p>LDB3</p></td>
<td><p>87</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>3</p></th>
<td><p>Button B</p></td>
<td><p>5</p></td>
<td><p>P1</p></td>
<td><p>61</p></td>
<td><p>I/O</p></td>
<th><p>23</p></th>
<td><p>LCD Data B4</p></td>
<td><p>98</p></td>
<td><p>LDB4</p></td>
<td><p>88</p></td>
<td><p>I/O (D4)</p></td>
</tr><tr>
<th><p>4</p></th>
<td><p>Button A</p></td>
<td><p>4</p></td>
<td><p>P0</p></td>
<td><p>62</p></td>
<td><p>I/O</p></td>
<th><p>24</p></th>
<td><p>LCD Data B5</p></td>
<td><p>97</p></td>
<td><p>LDB5</p></td>
<td><p>89</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>5</p></th>
<td><p>Button R</p></td>
<td><p>3</p></td>
<td><p>P8</p></td>
<td><p>63</p></td>
<td><p>I/O</p></td>
<th><p>25</p></th>
<td><p>LCD Data G1</p></td>
<td><p>96</p></td>
<td><p>LDG1</p></td>
<td><p>92</p></td>
<td><p>I/O (D3)</p></td>
</tr><tr>
<th><p>6</p></th>
<td><p>Button Start</p></td>
<td><p>127</p></td>
<td><p>P3</p></td>
<td><p>65</p></td>
<td><p>I/O</p></td>
<th><p>26</p></th>
<td><p>LCD Data G2</p></td>
<td><p>95</p></td>
<td><p>LDG2</p></td>
<td><p>93</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>7</p></th>
<td><p>Button Select</p></td>
<td><p>126</p></td>
<td><p>P2</p></td>
<td><p>66</p></td>
<td><p>I/O</p></td>
<th><p>27</p></th>
<td><p>LCD Data G3</p></td>
<td><p>94</p></td>
<td><p>LDG3</p></td>
<td><p>94</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>8</p></th>
<td><p>Button D-Right</p></td>
<td><p>123</p></td>
<td><p>P4</p></td>
<td><p>67</p></td>
<td><p>I/O</p></td>
<th><p>28</p></th>
<td><p>GND</p></td>
<td><p>102,128,...</p></td>
<td><p>GND</p></td>
<td><p>81,91,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>9</p></th>
<td><p>Button D-Down</p></td>
<td><p>122</p></td>
<td><p>P7</p></td>
<td><p>68</p></td>
<td><p>I/O</p></td>
<th><p>29</p></th>
<td><p>LCD Data G4</p></td>
<td><p>93</p></td>
<td><p>LDG4</p></td>
<td><p>95</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>10</p></th>
<td><p>Button D-Left</p></td>
<td><p>121</p></td>
<td><p>P5</p></td>
<td><p>69</p></td>
<td><p>I/O</p></td>
<th><p>30</p></th>
<td><p>LCD Data G5</p></td>
<td><p>92</p></td>
<td><p>LDG5</p></td>
<td><p>96</p></td>
<td><p>I/O (D2)</p></td>
</tr><tr>
<th><p>11</p></th>
<td><p>Button D-Up</p></td>
<td><p>120</p></td>
<td><p>P6</p></td>
<td><p>75</p></td>
<td><p>I/O (D7)</p></td>
<th><p>31</p></th>
<td><p>LCD Data R1</p></td>
<td><p>91</p></td>
<td><p>LDR1</p></td>
<td><p>97</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>12</p></th>
<td><p>Button L</p></td>
<td><p>119</p></td>
<td><p>P9</p></td>
<td><p>77</p></td>
<td><p>I/O</p></td>
<th><p>32</p></th>
<td><p>LCD Data R2</p></td>
<td><p>90</p></td>
<td><p>LDR2</p></td>
<td><p>98</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>13</p></th>
<td><p>LCD VSHD Enable?</p></td>
<td><p>118</p></td>
<td><p>R10</p></td>
<td><p>78</p></td>
<td><p>I/O</p></td>
<th><p>33</p></th>
<td><p>LCD Data R3</p></td>
<td><p>89</p></td>
<td><p>LDR3</p></td>
<td><p>99</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>14</p></th>
<td><p>AGB-REG Switch?</p></td>
<td><p>108</p></td>
<td><p>REVC</p></td>
<td><p>79</p></td>
<td><p>I/O (D6)</p></td>
<th><p>34</p></th>
<td><p>LCD Data R4</p></td>
<td><p>88</p></td>
<td><p>LDR4</p></td>
<td><p>101</p></td>
<td><p>I/O (D1)</p></td>
</tr><tr>
<th><p>15</p></th>
<td><p>LCD Mode?</p></td>
<td><p>107</p></td>
<td><p>MOD</p></td>
<td><p>80</p></td>
<td><p>I/O</p></td>
<th><p>35</p></th>
<td><p>LCD Data R5</p></td>
<td><p>87</p></td>
<td><p>LDR5</p></td>
<td><p>102</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>16</p></th>
<td><p>LCD SPS?</p></td>
<td><p>106</p></td>
<td><p>SPS</p></td>
<td><p>82</p></td>
<td><p>I/O</p></td>
<th><p>36</p></th>
<td><p>GND</p></td>
<td><p>102,128,...</p></td>
<td><p>GND</p></td>
<td><p>81,91,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>17</p></th>
<td><p>LCD CLS?</p></td>
<td><p>105</p></td>
<td><p>CLS</p></td>
<td><p>83</p></td>
<td><p>I/O</p></td>
<th><p>37</p></th>
<td><p>LCD PS?</p></td>
<td><p>86</p></td>
<td><p>PS</p></td>
<td><p>103</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>18</p></th>
<td><p>LCD SPL?</p></td>
<td><p>104</p></td>
<td><p>SPL</p></td>
<td><p>84</p></td>
<td><p>I/O (D5)</p></td>
<th><p>38</p></th>
<td><p>LCD LP?</p></td>
<td><p>85</p></td>
<td><p>LP</p></td>
<td><p>104</p></td>
<td><p>I/O</p></td>
</tr><tr>
<th><p>19</p></th>
<td><p>GND</p></td>
<td><p>102,128,...</p></td>
<td><p>GND</p></td>
<td><p>81,91,...</p></td>
<td><p>GND</p></td>
<th><p>39</p></th>
<td><p>LCD Data Clock?</p></td>
<td><p>84</p></td>
<td><p>DCK</p></td>
<td><p>112</p></td>
<td><p>I/O, GCK7</p></td>
</tr><tr>
<th><p>20</p></th>
<td><p>LCD Data B1</p></td>
<td><p>101</p></td>
<td><p>LDB1</p></td>
<td><p>85</p></td>
<td><p>I/O</p></td>
<th><p>40</p></th>
<td><p>3.3 V Supply</p></td>
<td><p>1,103</p></td>
<td><p>VDD3</p></td>
<td><p>128,144,...</p></td>
<td><p>VCC</p></td>
</tr>
</table>
<i><u>Table 1</u><br>
Connections from Wide-Boy64 AGB 40-pin connector to AGB CPU and Spartan FPGA</i></p>
<h3 id="agbmem">Memories connected to FPGA (and each other) on Wide-Boy64 AGB</h3>
<h4 id="agbflash">Flash</h4>
<p><table border="1">
<tr>
<th><p><i>Pin#</i></p></th>
<th><p>Name</p></th>
<th colspan="2"><p>To FPGA</p></th>
<th colspan="2"><p>To DRAM</p></th>
<th><p><i>Pin#</i></p></th>
<th><p>Name</p></th>
<th colspan="2"><p>To FPGA</p></th>
<th colspan="2"><p>To DRAM</p></th>
</tr><tr>
<th><p>1</p></th>
<td><p>A15</p></td>
<td><p>21</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>25</p></th>
<td><p>A0</p></td>
<td><p>3</p></td>
<td><p>I/O</p></td>
<td><p>23</p></td>
<td><p>A0</p></td>
</tr><tr>
<th><p>2</p></th>
<td><p>A14</p></td>
<td><p>20</p></td>
<td><p>I/O</p></td>
<td><p>21</p></td>
<td><p>BA1(A12)</p></td>
<th><p>26</p></th>
<td><p>CE#</p></td>
<td><p>28</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
</tr><tr>
<th><p>3</p></th>
<td><p>A13</p></td>
<td><p>19</p></td>
<td><p>I/O</p></td>
<td><p>20</p></td>
<td><p>BA0(A13)</p></td>
<th><p>27</p></th>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>41,46,...</p></td>
<td><p>VSS,VSSQ</p></td>
</tr><tr>
<th><p>4</p></th>
<td><p>A12</p></td>
<td><p>16</p></td>
<td><p>I/O</p></td>
<td><p>36</p></td>
<td><p>NC</p></td>
<th><p>28</p></th>
<td><p>OE#</p></td>
<td><p>29</p></td>
<td><p>I/O</p></td>
<td><p>17</p></td>
<td><p>!CAS</p></td>
</tr><tr>
<th><p>5</p></th>
<td><p>A11</p></td>
<td><p>15</p></td>
<td><p>I/O</p></td>
<td><p>35</p></td>
<td><p>A11</p></td>
<th><p>29</p></th>
<td><p>DQ0</p></td>
<td><p>47</p></td>
<td><p>I/O</p></td>
<td><p>2</p></td>
<td><p>DQ0</p></td>
</tr><tr>
<th><p>6</p></th>
<td><p>A10</p></td>
<td><p>14</p></td>
<td><p>I/O</p></td>
<td><p>22</p></td>
<td><p>A10</p></td>
<th><p>30</p></th>
<td><p>DQ8</p></td>
<td><p>58</p></td>
<td><p>I/O</p></td>
<td><p>42</p></td>
<td><p>DQ8</p></td>
</tr><tr>
<th><p>7</p></th>
<td><p>A9</p></td>
<td><p>13</p></td>
<td><p>I/O</p></td>
<td><p>34</p></td>
<td><p>A9</p></td>
<th><p>31</p></th>
<td><p>DQ1</p></td>
<td><p>46</p></td>
<td><p>I/O</p></td>
<td><p>4</p></td>
<td><p>DQ1</p></td>
</tr><tr>
<th><p>8</p></th>
<td><p>A8</p></td>
<td><p>12</p></td>
<td><p>I/O</p></td>
<td><p>33</p></td>
<td><p>A8</p></td>
<th><p>32</p></th>
<td><p>DQ9</p></td>
<td><p>57</p></td>
<td><p>I/O</p></td>
<td><p>44</p></td>
<td><p>DQ9</p></td>
</tr><tr>
<th><p>9</p></th>
<td><p>A19</p></td>
<td><p>25</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>33</p></th>
<td><p>DQ2</p></td>
<td><p>43</p></td>
<td><p>I/O</p></td>
<td><p>5</p></td>
<td><p>DQ2</p></td>
</tr><tr>
<th><p>10</p></th>
<td><p>A20</p></td>
<td><p>26</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>34</p></th>
<td><p>DQ10</p></td>
<td><p>56</p></td>
<td><p>I/O</p></td>
<td><p>45</p></td>
<td><p>DQ10</p></td>
</tr><tr>
<th><p>11</p></th>
<td><p>WE#</p></td>
<td><p>30</p></td>
<td><p>I/O</p></td>
<td><p>16</p></td>
<td><p>!WE</p></td>
<th><p>35</p></th>
<td><p>DQ3</p></td>
<td><p>42</p></td>
<td><p>I/O</p></td>
<td><p>7</p></td>
<td><p>DQ3</p></td>
</tr><tr>
<th><p>12</p></th>
<td><p>RP#</p></td>
<td><p>74</p></td>
<td><p>!PROGRAM</p></td>
<td colspan="2"><p>-</p></td>
<th><p>36</p></th>
<td><p>DQ11</p></td>
<td><p>52</p></td>
<td><p>I/O</p></td>
<td><p>47</p></td>
<td><p>DQ11</p></td>
</tr><tr>
<th><p>13</p></th>
<td><p>VCCW</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>1,3,...</p></td>
<td><p>VCC,VCCQ</p></td>
<th><p>37</p></th>
<td><p>VCC</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>1,3,...</p></td>
<td><p>VCC,VCCQ</p></td>
</tr><tr>
<th><p>14</p></th>
<td><p>WP#</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>1,3,...</p></td>
<td><p>VCC,VCCQ</p></td>
<th><p>38</p></th>
<td><p>DQ4</p></td>
<td><p>41</p></td>
<td><p>I/O</p></td>
<td><p>8</p></td>
<td><p>DQ4</p></td>
</tr><tr>
<th><p>15</p></th>
<td><p>RY/BY#</p></td>
<td colspan="2"><p>-</p></td>
<td colspan="2"><p>-</p></td>
<th><p>39</p></th>
<td><p>DQ12</p></td>
<td><p>51</p></td>
<td><p>I/O</p></td>
<td><p>48</p></td>
<td><p>DQ12</p></td>
</tr><tr>
<th><p>16</p></th>
<td><p>A18</p></td>
<td><p>24</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>40</p></th>
<td><p>DQ5</p></td>
<td><p>39</p></td>
<td><p>I/O, GCK3</p></td>
<td><p>10</p></td>
<td><p>DQ5</p></td>
</tr><tr>
<th><p>17</p></th>
<td><p>A17</p></td>
<td><p>23</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>41</p></th>
<td><p>DQ13</p></td>
<td><p>50</p></td>
<td><p>I/O</p></td>
<td><p>50</p></td>
<td><p>DQ13</p></td>
</tr><tr>
<th><p>18</p></th>
<td><p>A7</p></td>
<td><p>11</p></td>
<td><p>I/O, TMS</p></td>
<td><p>32</p></td>
<td><p>A7</p></td>
<th><p>42</p></th>
<td><p>DQ6</p></td>
<td><p>33</p></td>
<td><p>I/O, GCK2</p></td>
<td><p>11</p></td>
<td><p>DQ6</p></td>
</tr><tr>
<th><p>19</p></th>
<td><p>A6</p></td>
<td><p>10</p></td>
<td><p>I/O</p></td>
<td><p>31</p></td>
<td><p>A6</p></td>
<th><p>43</p></th>
<td><p>DQ14</p></td>
<td><p>49</p></td>
<td><p>I/O</p></td>
<td><p>51</p></td>
<td><p>DQ14</p></td>
</tr><tr>
<th><p>20</p></th>
<td><p>A5</p></td>
<td><p>9</p></td>
<td><p>I/O</p></td>
<td><p>30</p></td>
<td><p>A5</p></td>
<th><p>44</p></th>
<td><p>DQ7</p></td>
<td><p>32</p></td>
<td><p>I/O</p></td>
<td><p>13</p></td>
<td><p>DQ7</p></td>
</tr><tr>
<th><p>21</p></th>
<td><p>A4</p></td>
<td><p>7</p></td>
<td><p>I/O, TCK</p></td>
<td><p>29</p></td>
<td><p>A4</p></td>
<th><p>45</p></th>
<td><p>DQ15/A-1</p></td>
<td><p>48</p></td>
<td><p>I/O</p></td>
<td><p>53</p></td>
<td><p>DQ15</p></td>
</tr><tr>
<th><p>22</p></th>
<td><p>A3</p></td>
<td><p>6</p></td>
<td><p>I/O, TDI</p></td>
<td><p>26</p></td>
<td><p>A3</p></td>
<th><p>46</p></th>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>41,46,...</p></td>
<td><p>VSS,VSSQ</p></td>
</tr><tr>
<th><p>23</p></th>
<td><p>A2</p></td>
<td><p>5</p></td>
<td><p>I/O</p></td>
<td><p>25</p></td>
<td><p>A2</p></td>
<th><p>47</p></th>
<td><p>BYTE#</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>1,3,...</p></td>
<td><p>VCC,VCCQ</p></td>
</tr><tr>
<th><p>24</p></th>
<td><p>A1</p></td>
<td><p>4</p></td>
<td><p>I/O</p></td>
<td><p>24</p></td>
<td><p>A1</p></td>
<th><p>48</p></th>
<td><p>A16</p></td>
<td><p>22</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
</tr>
</table>
<i><u>Table 2</u><br>
Connections from Flash on Wide-Boy64 AGB to Spartan FPGA and DRAM</i></p>
<h4 id="agbdram">DRAM</h4>
<p><table border="1">
<tr>
<th><p><i>Pin#</i></p></th>
<th><p>Name</p></th>
<th colspan="2"><p>To FPGA</p></th>
<th colspan="2"><p>To Flash</p></th>
<th><p><i>Pin#</i></p></th>
<th><p>Name</p></th>
<th colspan="2"><p>To FPGA</p></th>
<th colspan="2"><p>To Flash</p></th>
</tr><tr>
<th><p>1</p></th>
<td><p>VCC</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
<th><p>28</p></th>
<td><p>VSS</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>2</p></th>
<td><p>DQ0</p></td>
<td><p>47</p></td>
<td><p>I/O</p></td>
<td><p>29</p></td>
<td><p>DQ0</p></td>
<th><p>29</p></th>
<td><p>A4</p></td>
<td><p>7</p></td>
<td><p>I/O, TCK</p></td>
<td><p>21</p></td>
<td><p>A4</p></td>
</tr><tr>
<th><p>3</p></th>
<td><p>VCCQ</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
<th><p>30</p></th>
<td><p>A5</p></td>
<td><p>9</p></td>
<td><p>I/O</p></td>
<td><p>20</p></td>
<td><p>A5</p></td>
</tr><tr>
<th><p>4</p></th>
<td><p>DQ1</p></td>
<td><p>46</p></td>
<td><p>I/O</p></td>
<td><p>31</p></td>
<td><p>DQ1</p></td>
<th><p>31</p></th>
<td><p>A6</p></td>
<td><p>10</p></td>
<td><p>I/O</p></td>
<td><p>19</p></td>
<td><p>A6</p></td>
</tr><tr>
<th><p>5</p></th>
<td><p>DQ2</p></td>
<td><p>43</p></td>
<td><p>I/O</p></td>
<td><p>33</p></td>
<td><p>DQ2</p></td>
<th><p>32</p></th>
<td><p>A7</p></td>
<td><p>11</p></td>
<td><p>I/O, TMS</p></td>
<td><p>18</p></td>
<td><p>A7</p></td>
</tr><tr>
<th><p>6</p></th>
<td><p>VSSQ</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<th><p>33</p></th>
<td><p>A8</p></td>
<td><p>12</p></td>
<td><p>I/O</p></td>
<td><p>8</p></td>
<td><p>A8</p></td>
</tr><tr>
<th><p>7</p></th>
<td><p>DQ3</p></td>
<td><p>42</p></td>
<td><p>I/O</p></td>
<td><p>35</p></td>
<td><p>DQ3</p></td>
<th><p>34</p></th>
<td><p>A9</p></td>
<td><p>13</p></td>
<td><p>I/O</p></td>
<td><p>7</p></td>
<td><p>A9</p></td>
</tr><tr>
<th><p>8</p></th>
<td><p>DQ4</p></td>
<td><p>41</p></td>
<td><p>I/O</p></td>
<td><p>38</p></td>
<td><p>DQ4</p></td>
<th><p>35</p></th>
<td><p>A11</p></td>
<td><p>15</p></td>
<td><p>I/O</p></td>
<td><p>5</p></td>
<td><p>A11</p></td>
</tr><tr>
<th><p>9</p></th>
<td><p>VCCQ</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
<th><p>36</p></th>
<td><p>NC</p></td>
<td><p>16</p></td>
<td><p>I/O</p></td>
<td><p>4</p></td>
<td><p>A12</p></td>
</tr><tr>
<th><p>10</p></th>
<td><p>DQ5</p></td>
<td><p>39</p></td>
<td><p>I/O, GCK3</p></td>
<td><p>40</p></td>
<td><p>DQ5</p></td>
<th><p>37</p></th>
<td><p>CKE</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
</tr><tr>
<th><p>11</p></th>
<td><p>DQ6</p></td>
<td><p>33</p></td>
<td><p>I/O, GCK2</p></td>
<td><p>42</p></td>
<td><p>DQ6</p></td>
<th><p>38</p></th>
<td><p>CLK</p></td>
<td><p>106</p></td>
<td><p>I/O, GCK6 (DOUT)</p></td>
<td colspan="2"><p>-</p></td>
</tr><tr>
<th><p>12</p></th>
<td><p>VSSQ</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<th><p>39</p></th>
<td><p>UDQM</p></td>
<td><p>113</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
</tr><tr>
<th><p>13</p></th>
<td><p>DQ7</p></td>
<td><p>32</p></td>
<td><p>I/O</p></td>
<td><p>44</p></td>
<td><p>DQ7</p></td>
<th><p>40</p></th>
<td><p>NC</p></td>
<td colspan="2"><p>-</p></td>
<td colspan="2"><p>-</p></td>
</tr><tr>
<th><p>14</p></th>
<td><p>VCC</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
<th><p>41</p></th>
<td><p>VSS</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>15</p></th>
<td><p>LDQM</p></td>
<td><p>115</p></td>
<td><p>I/O (CS1)</p></td>
<td colspan="2"><p>-</p></td>
<th><p>42</p></th>
<td><p>DQ8</p></td>
<td><p>58</p></td>
<td><p>I/O</p></td>
<td><p>30</p></td>
<td><p>DQ8</p></td>
</tr><tr>
<th><p>16</p></th>
<td><p>!WE</p></td>
<td><p>30</p></td>
<td><p>I/O</p></td>
<td><p>11</p></td>
<td><p>WE#</p></td>
<th><p>43</p></th>
<td><p>VCCQ</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
</tr><tr>
<th><p>17</p></th>
<td><p>!CAS</p></td>
<td><p>29</p></td>
<td><p>I/O</p></td>
<td><p>28</p></td>
<td><p>OE#</p></td>
<th><p>44</p></th>
<td><p>DQ9</p></td>
<td><p>57</p></td>
<td><p>I/O</p></td>
<td><p>32</p></td>
<td><p>DQ9</p></td>
</tr><tr>
<th><p>18</p></th>
<td><p>!RAS</p></td>
<td><p>111</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>45</p></th>
<td><p>DQ10</p></td>
<td><p>56</p></td>
<td><p>I/O</p></td>
<td><p>34</p></td>
<td><p>DQ10</p></td>
</tr><tr>
<th><p>19</p></th>
<td><p>!CS</p></td>
<td><p>31</p></td>
<td><p>I/O</p></td>
<td colspan="2"><p>-</p></td>
<th><p>46</p></th>
<td><p>VSSQ</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>20</p></th>
<td><p>BA0(A13)</p></td>
<td><p>19</p></td>
<td><p>I/O</p></td>
<td><p>3</p></td>
<td><p>A13</p></td>
<th><p>47</p></th>
<td><p>DQ11</p></td>
<td><p>52</p></td>
<td><p>I/O</p></td>
<td><p>36</p></td>
<td><p>DQ11</p></td>
</tr><tr>
<th><p>21</p></th>
<td><p>BA1(A12)</p></td>
<td><p>20</p></td>
<td><p>I/O</p></td>
<td><p>2</p></td>
<td><p>A14</p></td>
<th><p>48</p></th>
<td><p>DQ12</p></td>
<td><p>51</p></td>
<td><p>I/O</p></td>
<td><p>39</p></td>
<td><p>DQ12</p></td>
</tr><tr>
<th><p>22</p></th>
<td><p>A10</p></td>
<td><p>14</p></td>
<td><p>I/O</p></td>
<td><p>6</p></td>
<td><p>A10</p></td>
<th><p>49</p></th>
<td><p>VCCQ</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
</tr><tr>
<th><p>23</p></th>
<td><p>A0</p></td>
<td><p>3</p></td>
<td><p>I/O</p></td>
<td><p>25</p></td>
<td><p>A0</p></td>
<th><p>50</p></th>
<td><p>DQ13</p></td>
<td><p>50</p></td>
<td><p>I/O</p></td>
<td><p>41</p></td>
<td><p>DQ13</p></td>
</tr><tr>
<th><p>24</p></th>
<td><p>A1</p></td>
<td><p>4</p></td>
<td><p>I/O</p></td>
<td><p>24</p></td>
<td><p>A1</p></td>
<th><p>51</p></th>
<td><p>DQ14</p></td>
<td><p>49</p></td>
<td><p>I/O</p></td>
<td><p>43</p></td>
<td><p>DQ14</p></td>
</tr><tr>
<th><p>25</p></th>
<td><p>A2</p></td>
<td><p>5</p></td>
<td><p>I/O</p></td>
<td><p>23</p></td>
<td><p>A2</p></td>
<th><p>52</p></th>
<td><p>VSSQ</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
</tr><tr>
<th><p>26</p></th>
<td><p>A3</p></td>
<td><p>6</p></td>
<td><p>I/O, TDI</p></td>
<td><p>22</p></td>
<td><p>A3</p></td>
<th><p>53</p></th>
<td><p>DQ15</p></td>
<td><p>48</p></td>
<td><p>I/O</p></td>
<td><p>45</p></td>
<td><p>DQ15/A-1</p></td>
</tr><tr>
<th><p>27</p></th>
<td><p>VCC</p></td>
<td><p>144,...</p></td>
<td><p>VCC</p></td>
<td><p>37,13,...</p></td>
<td><p>VCC,VCCW</p></td>
<th><p>54</p></th>
<td><p>VSS</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
<td><p>27,...</p></td>
<td><p>GND</p></td>
</tr>
</table>
<i><u>Table 3</u><br>
Connections from DRAM on Wide-Boy64 AGB to Spartan FPGA and Flash</i></p>
<h3 id="agbvolt">Voltages measured on regulators on Wide-Boy64 AGB</h3>
<p><table border="1">
<tr>
<th><p><i>Pin#</i></p></th>
<th><p>Name</p></th>
<th><p>U3</p></th>
<th><p>U4</p></th>
<th><p>U5</p></th>
</tr><tr>
<th><p>1</p></th>
<td><p>VIN</p></td>
<td><p>11.5 V</p></td>
<td><p>11.5 V</p></td>
<td><p>5 V</p></td>
</tr><tr>
<th><p>2</p></th>
<td><p>VO</p></td>
<td><p>2.5 V</p></td>
<td><p>5 V</p></td>
<td><p>3.3 V</p></td>
</tr><tr>
<th><p>3</p></th>
<td><p>GND</p></td>
<td><p>0 V</p></td>
<td><p>0 V</p></td>
<td><p>0 V</p></td>
</tr><tr>
<th><p>4</p></th>
<td><p>VADJ/VC</p></td>
<td><p>1.25 V</p></td>
<td><p>2.5 V</p></td>
<td><p>1.25 V</p></td>
</tr>
</table>
<i><u>Table 4</u><br>
Voltages measured at the three voltage regulators at the bottom of the Wide-Boy64 AGB PCB</i></p>
<h2 id="cloning">Ideas for building a Wide-Boy64 clone</h2>
<p>I think, the upper part of the PCB is easy to copy. There is a
<a href="https://dragaosemchama.com/en/2015/02/game-boy-advance-service-manual-and-schematics/">Portuguese Game Boy Advance Service Manual</a>
which contains the schematics for a Game Boy Advance. This should help to put together the AGB CPU,
WRAM, AGB AMP, Cartridge Slot and Link Port. Desoldering the Cartridge Slot from a GBA could be a bit
of a pain, I haven't tried it yet. I bought them on
<a href="https://aliexpress.com/item/32867654481.html">AliExpress</a>, but those ones don't have room
for that switch, unfortunately.</p>
<p>The Spartan XCS20XL is not produced anymore, but you can still buy some on, again, AliExpress. I
wasn't able to find those bitstream PROMs, though. If I'm not able to find one that behaves in a
compatible way, then I would use a second FPGA to emulate the behaviour of the XC17S20XL PROM. This
FPGA could also emulate the N64 CIC. Then it wouldn't be necessary to sacrifice a cartridge for that.</p>
<p>A better approach would be to replace the outdated Spartan FPGA, but then this would mean one has to
implement the decoding of the display signals. The frame buffer interface to the N64 would also have to
be replicated. I don't know what is easier: Reverse engineering the interface between the Spartan and
the N64 software inside the flash, or writing the N64 code from scratch as well.</p>
<h2 id="links">Links</h2>
<p><ul>
<li><a href="https://www.xilinx.com/support/documentation/data_sheets/ds060.pdf">Spartan and Spartan-XL FPGA Families Data Sheet</a></li>
<li><a href="https://www.xilinx.com/support/documentation/data_sheets/ds030.pdf">Spartan/XL Family One-Time ProgrammableConfiguration PROMs (XC17S00/XL)</a></li>
<li><a href="https://dragaosemchama.com/en/2015/02/game-boy-advance-service-manual-and-schematics/">Game Boy Advance service manual and schematics</a></li>
<li><a href="https://datasheetspdf.com/pdf/368919/NEC/UPD45128163/1">µPD45128163 - 128M-bit Synchronous DRAM</a></li>
<li><a href="https://datasheetspdf.com/datasheet/LH28F320BJE-PTTL90.html">LH28F320BJE-PTTL90 - Flash Memory 32M</a></li>
<li><a href="https://www.datasheets360.com/part/detail/mx8350/-7133688394404043430/">MX8350 - 2 in 1 Rambus Clock Generator</a></li>
<li><a href="https://datasheetspdf.com/datasheet/PQ30RV21.html">PQ30RV21 - Variable Output Low Power-Loss Voltage Regulators</a></li>
<li><a href="https://datasheetspdf.com/datasheet/PQ05RF21.html">PQ05RF21 - 2A Output, Low Power-Loss Voltage Regulators</a></li>
</ul></p>
</body>
</html>
